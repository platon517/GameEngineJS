!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=86)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(111),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=window.innerWidth*window.devicePixelRatio,r=window.innerHeight*window.devicePixelRatio;e.gc={originSize:{w:window.innerWidth,h:window.innerHeight},srcSize:{w:n,h:r},mult:1,modifer:window.devicePixelRatio}},function(t,e){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports={default:i(131),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(82),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(4)),r=o(i(142));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,o){null===e&&(e=Function.prototype);var s=(0,r.default)(e,i);if(void 0===s){var a=(0,n.default)(e);return null===a?void 0:t(a,i,o)}if("value"in s)return s.value;var u=s.get;return void 0!==u?u.call(o):void 0}},function(t,e,i){"use strict";e.__esModule=!0;var n=s(i(145)),r=s(i(149)),o=s(i(82));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameObject=void 0;var n=s(i(0)),r=s(i(1)),o=i(42);function s(t){return t&&t.__esModule?t:{default:t}}e.GameObject=function(){function t(){(0,n.default)(this,t),this.ui=[],this._initFunction=function(){}}return(0,r.default)(t,[{key:"render",value:function(){o.engineVisual.renderList.add(this)}},{key:"renderClear",value:function(){o.engineVisual.renderList.delete(this)}},{key:"getCoords",value:function(){return this.sprite&&(Array.isArray(this.sprite)?this.sprite[0].getCoords():this.sprite.getCoords())}},{key:"getColliderInfo",value:function(){return this.collider&&this.collider.getInfo()}},{key:"getRenderIndex",value:function(){return o.engineVisual.renderList.getZIndex(this)}},{key:"setRenderIndex",value:function(t){o.engineVisual.renderList.setZIndex(this,t)}},{key:"setInit",value:function(t){this._initFunction=t}},{key:"init",value:function(){this._initFunction()}},{key:"tick",value:function(){}},{key:"moveTo",value:function(){for(var t,e,i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];this.collider&&(t=this.collider).moveTo.apply(t,n),this.sprite&&(Array.isArray(this.sprite)?this.sprite.forEach(function(t){return t.moveTo.apply(t,n)}):(e=this.sprite).moveTo.apply(e,n)),this.ui.forEach(function(t){t.moveTo.apply(t,n)}),this.pos=n[0]}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SquareSprite=e.Sprite=void 0;var n=f(i(4)),r=f(i(5)),o=f(i(6)),s=f(i(7)),a=f(i(0)),u=f(i(1)),l=i(26),c=i(2);function f(t){return t&&t.__esModule?t:{default:t}}var h=e.Sprite=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"img/engine-defaults/no-image.png",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{w:300,h:300},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{w:40,h:40},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};(0,a.default)(this,t),d.call(this),this._canvasObject=new Image,this._idle=e,this._canvasObject.src=this._idle,this._idleCoords=i,this._nowMoving=null,this._nowOffset=null,this._nowAnimation=null,this._rotation=0,this._alpha=1,this._rotationPivot=null,this._animations={example:{frames:[{x:-5,y:0},{x:-10,y:0},{x:-15,y:0},{x:-20,y:0},{x:-25,y:0},{x:-30,y:0}],time:3e3}},this._innerSize=n,this._size={w:r.w*c.gc.mult,h:r.h*c.gc.mult},this._coords={x:0,y:0},this._offset={x:o.x*c.gc.mult,y:o.y*c.gc.mult},this._nowState=this._idleCoords}return(0,u.default)(t,[{key:"changeNowState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this._nowState=t}},{key:"moveTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={start_x:this._coords.x,start_y:this._coords.y,end_x:t.x-this._coords.x,end_y:t.y-this._coords.y};this._nowMoving={path:n,pos:t,time:e,startTime:i}}else this._nowMoving=null,this._coords=t}},{key:"addAnimation",value:function(t){this._animations[t.title]=t.config}},{key:"playAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(new Date).getTime();this._nowAnimation={name:t,startTime:n,loop:e,freeze:i}}},{key:"getCurrentAnimation",value:function(){return this._nowAnimation}},{key:"stopAnimation",value:function(){this._nowState=this._idleCoords,this._nowAnimation=null}},{key:"setIdleCoords",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this._idleCoords=t}},{key:"getAnimationInfo",value:function(t){return this._animations[t]}},{key:"getCoords",value:function(){return this._coords}},{key:"getSize",value:function(){return this._size}},{key:"setImageSrc",value:function(t){this._idle=t,this._canvasObject.src=this._idle}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var n=(new Date).getTime(),r={start:this._rotation,end:t-this._rotation};this._nowRotating={path:r,val:t,time:e,startTime:n,loop:i}}else this._rotation=t}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationPivot",value:function(t){this._rotationPivot=t}},{key:"setAlpha",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime();this._newAlpha={deltaVal:t-this._alpha,endVal:t,startVal:this._alpha,time:e,startTime:i}}else this._newAlpha=null,this._alpha=t}},{key:"setInnerOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={x:this._nowState.x,y:this._nowState.y},r=t;this._newInnerOffset={startInnerVal:n,endInnerVal:r,time:e,startTime:i}}else this._newInnerOffset=null,this._nowState=t}},{key:"setInnerSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={w:this._innerSize.w,h:this._innerSize.h},r=t;this._newInnerSize={startInnerVal:n,endInnerVal:r,time:e,startTime:i}}else this._newInnerSize=null,this._innerSize=t}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={start_x:this._offset.x,start_y:this._offset.y,end_x:t.x-this._offset.x,end_y:t.y-this._offset.y};this._nowOffset={path:n,pos:t,time:e,startTime:i}}else this._nowOffset=null,this._offset=t}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:0,h:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={start_w:this._size.w,start_h:this._size.h,end_w:t.w-this._size.w,end_h:t.h-this._size.h};this._nowSize={path:n,val:t,time:e,startTime:i}}else this._nowSize=null,this._size=t}},{key:"draw",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._canvasObject,n=this._nowState,r=this._innerSize,o=this._coords,s=this._size,a=this._nowAnimation,u=this._animations,c=this._nowMoving,f=this._idleCoords,h=this._rotation,d=this._nowResizing,p=this._nowRotating,_=this._newAlpha,v=this._rotationPivot,g=this._newInnerOffset,y=this._nowOffset,m=this._offset,x=this._newInnerSize,w=this._nowSize,S=(new Date).getTime();if(a){var b=u[a.name],T=a.startTime,k=b.time/b.frames.length,O=S-T,C=Math.floor(O/k);C<b.frames.length?n=b.frames[C]:a.loop?(this.playAnimation(a.name,!0),n=b.frames[0]):a.freeze?n=b.frames[b.frames.length-1]:(n=f,this._nowAnimation=null)}if(c){var E=S-c.startTime,z=c.time,P=c.path;if(this._coords={x:P.start_x+P.end_x/z*E,y:P.start_y+P.end_y/z*E},E>=z){var I=c.pos;this._nowMoving=null,this._coords=I}}if(d){var M=S-d.startTime,A=d.time,j=d.path;if(this._size={w:j.start_w+j.end_w/A*M,h:j.start_h+j.end_h/A*M},this._offset={x:d.startOffset.x+d.endOffset.x/A*M,y:d.startOffset.y+d.endOffset.y/A*M},M>=A){var B=d.size;this._nowResizing=null,this._size=B,this._offset=d.offset}}if(p){var L=S-p.startTime,R=p.time,G=p.path;if(this._rotation=G.start+G.end/R*L,L>=R)if(this._rotation=p.val,p.loop){this._rotation=0;var Y=(new Date).getTime(),D={start:this._rotation,end:p.val-this._rotation};this._nowRotating={path:D,val:p.val,time:R,startTime:Y,loop:p.loop}}else this._nowRotating=null}if(_){var N=_.startVal,F=S-_.startTime,Z=_.time,V=N+_.deltaVal/Z*F;this._alpha=V,F>=Z&&(this._alpha=_.endVal,this._newAlpha=null)}if(g){var W=S-g.startTime,U=g.time;this._nowState={x:g.startInnerVal.x+(g.endInnerVal.x-g.startInnerVal.x)/U*W,y:g.startInnerVal.y+(g.endInnerVal.y-g.startInnerVal.y)/U*W},W>=U&&(this._nowState=g.endInnerVal,this._newInnerOffset=null)}if(x){var K=S-x.startTime,H=x.time;this._innerSize={w:x.startInnerVal.w+(x.endInnerVal.w-x.startInnerVal.w)/H*K,h:x.startInnerVal.h+(x.endInnerVal.h-x.startInnerVal.h)/H*K},K>=H&&(this._innerSize=x.endInnerVal,this._newInnerSize=null)}if(y){var X=S-y.startTime,J=y.time,q=y.path;if(this._offset={x:q.start_x+q.end_x/J*X,y:q.start_y+q.end_y/J*X},X>=J){var Q=y.pos;this._nowOffset=null,this._offset=Q}}if(w){var $=S-w.startTime,tt=w.time,et=w.path;if(this._size={w:et.start_w+et.end_w/tt*$,h:et.start_h+et.end_h/tt*$},$>=tt){var it=w.val;this._nowSize=null,this._size=it}}t.globalAlpha=this._alpha;var nt=l.Camera.getCoords();e&&function(t,e,i,n,r,o,s,a,u,l,c){var f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null;t.save();var h=void 0,d=void 0;f?(h=a+f.x,d=u+f.y):(h=a+l/2,d=u+c/2),t.translate(h,d),t.rotate(e*Math.PI/180),t.translate(-h,-d),t.drawImage(i,n,r,o,s,a,u,l,c),t.restore(),t.globalAlpha=1}(t,h,i,n.x,n.y,r.w,r.h,o.x+m.x+nt.x,o.y+m.y+nt.y,s.w,s.h,v)}}]),t}(),d=function(){var t,e,i,n,r=this;this.resize=(t=void 0,e=void 0,i=void 0,n=void 0,function(o){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&e||(t=r._size.w,e=r._size.h),r._size.w===t&&r._size.h===e&&(i=r._offset.x,n=r._offset.y);var a=t*o,u=e*o,l={x:i-(a-t)/2,y:n-(u-e)/2};if(s){var c=(new Date).getTime(),f={x:r._offset.x,y:r._offset.y},h={x:(a-r._size.w)/-2,y:(u-r._size.h)/-2},d={start_w:r._size.w,start_h:r._size.h,end_w:a-r._size.w,end_h:u-r._size.h},p={w:a,h:u};r._nowResizing={path:d,size:p,time:s,startTime:c,offset:l,startOffset:f,endOffset:h}}else r._nowResizing=null,r._offset=l,r._size={w:a,h:u}})};e.SquareSprite=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:100,h:100},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,a.default)(this,e);var u=(0,r.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return u._size=t,u._color=i,u._alpha=1,u._radius=s,u._offset=o,u._nowMoving=null,u}return(0,s.default)(e,t),(0,u.default)(e,[{key:"moveTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={start_x:this._coords.x,start_y:this._coords.y,end_x:t.x-this._coords.x,end_y:t.y-this._coords.y};this._nowMoving={path:n,pos:t,time:e,startTime:i}}else this._nowMoving=null,this._coords=t}},{key:"setColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white";this._color=t}},{key:"draw",value:function(t){var i=(new Date).getTime();(0,o.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"draw",this).call(this,t,!1);l.Camera.getCoords();var r=t.globalAlpha;if(this._nowMoving){var s=i-this._nowMoving.startTime,a=this._nowMoving.time,u=this._nowMoving.path;if(this._coords={x:u.start_x+u.end_x/a*s,y:u.start_y+u.end_y/a*s},s>=a){var c=this._nowMoving.pos;this._nowMoving=null,this._coords=c}}var f=this._radius,h=this._size,d=h.w,p=h.h,_=this._coords,v=_.x,g=_.y;v+=this._offset.x,g+=this._offset.y,t.fillStyle=this._color,t.globalAlpha=this._alpha,t.beginPath(),t.moveTo(v+f,g),t.arcTo(v+d,g,v+d,g+p,f),t.arcTo(v+d,g+p,v,g+p,f),t.arcTo(v,g+p,v,g,f),t.arcTo(v,g,v+d,g,f),t.closePath(),t.fill(),t.globalAlpha=r}}]),e}(h)},function(t,e,i){var n=i(51)("wks"),r=i(37),o=i(14).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoreScene=e.AddTurnsButtonObj=e.ChangeButtonObj=e.BrushButtonObj=e.EndPlate=e.Counter=e.ScoreBar=e.MainBackground=e.ScratchCatButtonObj=e.ScratchCatObj=e.Paw=e.BigYarnBallObj=e.MainCursor=e.YarnGrid=e.GameStates=void 0;var n=i(114),r=i(26),o=i(115),s=i(157),a=i(158),u=i(159),l=i(160),c=i(27),f=i(63),h=i(2),d=i(161),p=i(162),_=i(163),v=i(164),g=i(165),y=i(167),m=i(168),x=i(169);r.Camera.moveTo({x:0,y:0});var w=e.GameStates={turns:45,gameOver:!1},S={x:(h.gc.srcSize.w-c.BALL_SIZE*f.GRID_SIZE)/2,y:h.gc.srcSize.h-c.BALL_SIZE*f.GRID_SIZE-100*h.gc.modifer},b=e.YarnGrid=new o.Grid(S,f.GRID_SIZE),T=e.MainCursor=new s.Cursor({x:0,y:0}),k=e.BigYarnBallObj=new a.BigYarnBall({x:0,y:0},c.BLUE),O=e.Paw=new u.PawCollector({x:h.gc.srcSize.w,y:-375}),C=e.ScratchCatObj=new l.ScratchCat({x:0,y:0}),E={w:130*h.gc.modifer,h:76*h.gc.modifer},z=S.y+c.BALL_SIZE*f.GRID_SIZE+o.BORDER,P=e.ScratchCatButtonObj=new p.ScratchCatButton({w:E.w,h:E.h},{x:h.gc.srcSize.w/2-E.w/2,y:z+(h.gc.srcSize.h-z)/2-E.h/2}),I=e.MainBackground=new d.Background("img/background/room2.png",{x:0,y:0},{w:2e3,h:2e3},{w:h.gc.srcSize.h,h:h.gc.srcSize.h},{x:0,y:0},{x:(h.gc.srcSize.w-h.gc.srcSize.h)/2,y:0}),M=e.ScoreBar=new _.ScoreProgressBar({w:310*h.gc.modifer,h:310/6.8*h.gc.modifer},{x:(h.gc.srcSize.w-310*h.gc.modifer)/2,y:S.y-310/6.8*h.gc.modifer-20*h.gc.modifer}),A=e.Counter=new v.TurnsCounter({x:M.getCoords().x,y:M.getCoords().y-55*h.gc.modifer},{w:100*h.gc.modifer,h:50*h.gc.modifer},w.turns),j=e.EndPlate=new g.EndLevelPlate({x:h.gc.srcSize.w/2-250*h.gc.modifer/2,y:h.gc.srcSize.h/2-180*h.gc.modifer/2},{w:250*h.gc.modifer,h:180*h.gc.modifer});M.setMaxScore(200);var B=e.BrushButtonObj=new y.BrushButton({x:P.getCoords().x+P.sprite[0].getSize().w+15*h.gc.modifer,y:P.getCoords().y+(P.sprite[0].getSize().h-65*h.gc.modifer)/2},{w:65*h.gc.modifer,h:65*h.gc.modifer}),L=e.ChangeButtonObj=new m.ChangeButton({x:P.getCoords().x-80*h.gc.modifer,y:P.getCoords().y+(P.sprite[0].getSize().h-65*h.gc.modifer)/2},{w:65*h.gc.modifer,h:65*h.gc.modifer},3),R=e.AddTurnsButtonObj=new x.AddTurnsButton({x:A.getCoords().x+A.sprite.getSize().w+3*h.gc.modifer,y:M.getCoords().y-55*h.gc.modifer},{w:50*h.gc.modifer,h:50*h.gc.modifer});e.CoreScene=new n.Scene(128,128,[I,b,k,T,O,C,P,M,A,j,B,L,R],r.Camera)},function(t,e,i){var n=i(14),r=i(3),o=i(20),s=i(17),a=i(21),u=function(t,e,i){var l,c,f,h=t&u.F,d=t&u.G,p=t&u.S,_=t&u.P,v=t&u.B,g=t&u.W,y=d?r:r[e]||(r[e]={}),m=y.prototype,x=d?n:p?n[e]:(n[e]||{}).prototype;for(l in d&&(i=e),i)(c=!h&&x&&void 0!==x[l])&&a(y,l)||(f=c?x[l]:i[l],y[l]=d&&"function"!=typeof x[l]?i[l]:v&&c?o(f,n):g&&x[l]==f?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):_&&"function"==typeof f?o(Function.call,f):f,_&&((y.virtual||(y.virtual={}))[l]=f,t&u.R&&m&&!m[l]&&s(m,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,i){var n=i(18),r=i(65),o=i(48),s=Object.defineProperty;e.f=i(15)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){t.exports=!i(24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var n=i(13),r=i(30);t.exports=i(15)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(16);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getRandom=function(t,e){return Math.floor(Math.random()*(e-t))+t}},function(t,e,i){var n=i(64);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(69),r=i(46);t.exports=function(t){return n(r(t))}},function(t,e,i){"use strict";var n=i(89)(!0);i(47)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;i(2);var n=i(19);e.Camera={_coords:{x:0,y:0},_params:{w:128,h:128},_nowMoving:!1,_frames:null,_isShaking:!1,_setCoords:function(t){var e=this._frames;e&&!this._isShaking&&(t.x<e[0][0]&&(t.x=e[0][0]),t.x+this._params.w>e[1][0]&&(t.x=e[1][0]-this._params.w),t.y<e[0][1]&&(t.y=e[0][1]),t.y+this._params.h>e[1][1]&&(t.y=e[1][1]-this._params.h)),this._coords=t},setParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:128,h:128};this._params=t},setFrames:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0],[128,128]];this._frames=t},getCoords:function(){if(this._nowMoving){var t=(new Date).getTime()-this._nowMoving.startTime,e=this._nowMoving.time,i=this._nowMoving.path;if(this._setCoords({x:i.start_x+i.end_x/e*t,y:i.start_y+i.end_y/e*t}),t>=e){var n=this._nowMoving.pos;this._nowMoving=null,this._setCoords(n)}}return this._coords},moveTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={start_x:this._coords.x,start_y:this._coords.y,end_x:t.x-this._coords.x,end_y:t.y-this._coords.y};this._nowMoving={path:n,pos:t,time:e,startTime:i}}else this._setCoords(t)},shake:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._coords;this._isShaking=!0;var o=setInterval(function(){e.moveTo({x:(0,n.getRandom)(-1*i,i),y:(0,n.getRandom)(-1*i,i)},50)},50);setTimeout(function(){clearInterval(o),e._isShaking=!1,setTimeout(function(){e.moveTo(r)},100)},t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.YarnBall=e.getColorSrc=e.SHADOW_SIZE=e.BALL_SIZE=e.MULT=e.YELLOW=e.PURPLE=e.PINK=e.GREEN=e.BLUE=void 0;var n=g(i(40)),r=g(i(4)),o=g(i(0)),s=g(i(1)),a=g(i(5)),u=g(i(6)),l=g(i(7)),c=i(8),f=i(9),h=i(28),d=i(11),p=i(19),_=i(2),v=i(63);function g(t){return t&&t.__esModule?t:{default:t}}var y=e.BLUE="BLUE",m=e.GREEN="GREEN",x=e.PINK="PINK",w=e.PURPLE="PURPLE",S=e.YELLOW="YELLOW",b=e.MULT="MULT",T=10,k=e.BALL_SIZE=60/v.GRID_SIZE*5*_.gc.modifer,O=e.SHADOW_SIZE=72/v.GRID_SIZE*5*_.gc.modifer,C=e.getColorSrc=function(t){switch(t){case y:return"img/YarnBalls/png/yarn_blue.png";case m:return"img/YarnBalls/png/yarn_green.png";case x:return"img/YarnBalls/png/yarn_pink.png";case w:return"img/YarnBalls/png/yarn_purple.png";case S:return"img/YarnBalls/png/yarn_yellow.png";case b:return"img/YarnBalls/png/yarn_all.png"}};e.YarnBall=function(t){function e(t,i){(0,o.default)(this,e);var n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.sprite=[new f.Sprite("img/YarnBalls/png/yarn_shadow.png",{x:0,y:0},{w:500,h:500},{w:O,h:O},{x:(k-O)/2,y:(k-O)/2}),new f.Sprite(C(i),{x:0,y:0},{w:370,h:370},{w:k,h:k})],n.collider=new h.Collider({x:0,y:0},{w:k,h:k},{x:0,y:0}),n.collider.addInteractionObject(d.MainCursor),n.moveTo(t),n.selected=!1,n.color=i,n.disabled=!1,n.sprite[0].resize(.5),n.sprite[0].setAlpha(0),n.setInit(function(){n.render(),n.setRenderIndex(T)}),n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"_clearAnimationPlan",value:function(){this._animationPlan&&(clearTimeout(this._animationPlan),this._animationPlan=null)}},{key:"grow",value:function(){var t=this;this._clearAnimationPlan(),this.sprite[1].rotate(this.sprite[1]._rotation+(0,p.getRandom)(15,45),120),this.sprite[0].setAlpha(1,120),this.sprite[0].resize(1.3,120),this.sprite[1].resize(1.3,120),this.setRenderIndex(T+d.YarnGrid.selection.size),this._animationPlan=setTimeout(function(){t.sprite[0].resize(1.2,80),t.sprite[1].resize(1.2,80)},120)}},{key:"reset",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._clearAnimationPlan(),e?(this.sprite[0].resize(0,120),this.sprite[1].resize(0,120),setTimeout(function(){t.sprite[1].setImageSrc("img/YarnBalls/png/yarn_all.png"),t.sprite[0].setAlpha(0,80),t.sprite[0].resize(.5,80),t.sprite[1].resize(1,80)},120)):(this.sprite[1].rotate(this.sprite[1]._rotation+(0,p.getRandom)(-45,15),120),this.sprite[0].resize(.9,120),this.sprite[1].resize(.9,120),this.setRenderIndex(T),this._animationPlan=setTimeout(function(){t.sprite[0].setAlpha(0,80),t.sprite[0].resize(.5,80),t.sprite[1].resize(1,80)},120)),this.selected=!1}},{key:"setGridPos",value:function(t){this.gridX=t.x,this.gridY=t.y}},{key:"fall",value:function(){for(var t=this,e=1,i=0;void 0===d.YarnGrid.getBallByPos(this.gridX,this.gridY+e)&&e<d.YarnGrid.size-this.gridY;)e+=1,i+=1;var n=this.getCoords(),r=d.YarnGrid.getBallByPos(this.gridX,this.gridY-1),o=d.YarnGrid.balls.find(function(e){return e.obj===t});o.y+=i,o.obj.setGridPos({x:o.x,y:o.y}),r&&r.obj.fall(),this.moveTo({x:n.x,y:n.y+k*i},100*i),setTimeout(function(){t.sprite[1].resize(.9,100),setTimeout(function(){t.sprite[1].resize(1,100)},100)},100*i)}},{key:"clear",value:function(t){var e=this;this.sprite[0].setAlpha(0,200),this.sprite[1].setAlpha(0,200),this.sprite[1].resize(1,200),this.moveTo({x:t.x-k/2,y:t.y-k/2+150},200),setTimeout(function(){return e.renderClear()},200);var i=d.YarnGrid.getBallByPos(this.gridX,this.gridY-1);i&&!d.YarnGrid.selection.has(i.obj)&&i.obj.fall()}},{key:"tick",value:function(){var t=this;if((0,u.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"tick",this).call(this),!d.ChangeButtonObj.isChanging&&this._isGrown&&(this.reset(),d.YarnGrid.deleteFromSelection(this),this.selected=!1,this._isGrown=!1),!d.GameStates.gameOver&&this.collider.getInteractions().has(d.MainCursor.collider)&&!this.disabled&&!d.GameStates.gameOver){if(d.BrushButtonObj.isPainting){if(this.color===b)return!1;d.YarnGrid.disableColliders(this,!1)}if(d.ChangeButtonObj.isChanging)return!this._isGrown&&d.YarnGrid.selection.size<2&&(this.grow(),d.YarnGrid.addToSelection(this),setTimeout(function(){t._isGrown=!0},200)),this.selected||d.MainCursor.hold||(this.selected=!0),this.selected&&!d.MainCursor.hold&&this._isGrown&&(this.reset(),d.YarnGrid.deleteFromSelection(this),this.selected=!1,setTimeout(function(){t._isGrown=!1},200)),!1;if(d.YarnGrid.selection.size>0&&[].concat((0,n.default)(d.YarnGrid.selection)).pop().color!==this.color&&[].concat((0,n.default)(d.YarnGrid.selection)).pop().color!==b&&this.color!==b)return!1;if(d.MainCursor.hold&&!this.collider.disabled)if(this.selected){var i=[].concat((0,n.default)(d.YarnGrid.selection));if(i[i.length-2]===this&&!i[i.length-1].collider.getInteractions().has(d.MainCursor.collider)){var o=i.pop();o.reset(),d.YarnGrid.deleteFromSelection(o),d.YarnGrid.disableColliders([].concat((0,n.default)(d.YarnGrid.selection)).pop())}}else d.YarnGrid.disableColliders(this),d.YarnGrid.addToSelection(this),this.grow(),this.selected=!0}}}]),e}(c.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColliderGroup=e.Collider=void 0;var n=d(i(40)),r=d(i(58)),o=d(i(43)),s=d(i(0)),a=d(i(1)),u=i(42),l=(i(152),i(153)),c=i(154),f=i(26),h=i(2);function d(t){return t&&t.__esModule?t:{default:t}}var p=e.Collider=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{w:0,h:0},n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,s.default)(this,t),this._checkInteractions=function(){var t=void 0,e=void 0;0!==n._interactionsObjectsList.size?(t=n._interactionsObjectsList,e=!1):(t=u.engineVisual.renderList.get(),e=!0),t.forEach(function(t){if(!t)return!1;var i=e?t.obj.collider:t.collider;i instanceof _?i.arr.forEach(function(t){n._checkSingleInteractions(t)}):n._checkSingleInteractions(i)})},this._size={w:i.w*h.gc.mult,h:i.h*h.gc.mult},this._offset={x:a.x*h.gc.mult,y:a.y*h.gc.mult},this._coords=e,this._nowMoving=null,this._interactions=new o.default,this._interactionsObjectsList=new o.default,this.checkDelay=l,this._events=new r.default,this._type=null,this.disabled=!1,this.collides=!0}return(0,a.default)(t,[{key:"moveTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=(new Date).getTime(),n={start_x:this._coords.x,start_y:this._coords.y,end_x:t.x-this._coords.x,end_y:t.y-this._coords.y};this._nowMoving={path:n,pos:t,time:e,startTime:i}}else this._nowMoving=null,this._coords=t}},{key:"setEvent",value:function(t,e){this._events.set(t,e)}},{key:"deleteEvent",value:function(t){this._events.delete(t)}},{key:"callEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._events.get(t).apply(void 0,(0,n.default)(e))}},{key:"setDisabled",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disabled=t}},{key:"getType",value:function(){return this._type}},{key:"setType",value:function(t){this._type=t}},{key:"getInfo",value:function(){return{coords:this._coords,offset:this._offset,size:this._size,center:{x:(this._coords.x+this._offset.x+this._size.w)/2,y:(this._coords.y+this._offset.y+this._size.h)/2}}}},{key:"setInteraction",value:function(t){this._interactions.add(t)}},{key:"deleteInteraction",value:function(t){this._interactions.delete(t)}},{key:"addInteractionObject",value:function(t){this._interactionsObjectsList.add(t)}},{key:"deleteInteractionObject",value:function(t){this._interactionsObjectsList.delete(t)}},{key:"getInteractions",value:function(){return this._interactions}},{key:"_checkSingleInteractions",value:function(e){e instanceof t&&e!==this&&!e.disabled&&((0,l.isCollides)((0,c.getCoordsArr)({coords:this._coords,offset:this._offset,size:this._size}),(0,c.getCoordsArr)(e.getInfo()))?(this.setInteraction(e),e.setInteraction(this)):(this._interactions.has(e)||e.getInteractions().has(this))&&(this.deleteInteraction(e),e.deleteInteraction(this)))}},{key:"update",value:function(t){this._size,this._offset;var e=this._nowMoving;if(!this.disabled){var i=f.Camera.getCoords();if(e){var n=(new Date).getTime()-e.startTime,r=e.time,o=e.path;if(this._coords={x:o.start_x+o.end_x/r*n,y:o.start_y+o.end_y/r*n},n>=r){var s=e.pos;this._nowMoving=null,this._coords={x:s.x+i.x,y:s.y+i.y}}}this.collides&&this._checkInteractions();!1}}}]),t}(),_=e.ColliderGroup=function(){function t(e){var i=this;(0,s.default)(this,t),this.moveTo=function(){for(var t in i.arr){var e;(e=i.arr[t]).moveTo.apply(e,arguments)}},this.update=function(t){i.arr.forEach(function(e){return e.update(t)})},this.arr=e.map(function(t){return new(Function.prototype.bind.apply(p,[null].concat((0,n.default)(t))))})}return(0,a.default)(t,[{key:"addInteractionObject",value:function(t){this.arr.forEach(function(e){return e.addInteractionObject(t)})}},{key:"deleteInteractionObject",value:function(t){this.arr.forEach(function(e){return e.deleteInteractionObject(t)})}},{key:"setType",value:function(t){this.arr.forEach(function(e){return e.setType(t)})}},{key:"getGroup",value:function(){return this.arr}},{key:"getInteractions",value:function(){var t=new o.default;return this.arr.forEach(function(e){return t.add.apply(t,(0,n.default)(e._interactions))}),t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.localStorageRead=e.localStorageSave=void 0;var n,r=i(155),o=(n=r)&&n.__esModule?n:{default:n};e.localStorageSave=function(t,e){return localStorage.setItem(t,(0,o.default)(e))},e.localStorageRead=function(t){return localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):null}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(46);t.exports=function(t){return Object(n(t))}},function(t,e,i){i(95);for(var n=i(14),r=i(17),o=i(25),s=i(10)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=n[l],f=c&&c.prototype;f&&!f[s]&&r(f,s,l),o[l]=o.Array}},function(t,e){t.exports=!0},function(t,e,i){var n=i(18),r=i(91),o=i(52),s=i(50)("IE_PROTO"),a=function(){},u=function(){var t,e=i(66)("iframe"),n=o.length;for(e.style.display="none",i(94).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[o[n]];return u()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=u(),void 0===e?i:r(i,e)}},function(t,e,i){var n=i(68),r=i(52);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(45),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(13).f,r=i(21),o=i(10)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){var n=i(20),r=i(75),o=i(76),s=i(18),a=i(36),u=i(53),l={},c={};(e=t.exports=function(t,e,i,f,h){var d,p,_,v,g=h?function(){return t}:u(t),y=n(i,f,e?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=a(t.length);d>m;m++)if((v=e?y(s(p=t[m])[0],p[1]):y(t[m]))===l||v===c)return v}else for(_=g.call(t);!(p=_.next()).done;)if((v=r(_,y,p.value,e))===l||v===c)return v}).BREAK=l,e.RETURN=c},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(106),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,o.default)(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Text=e.RIGHT=e.LEFT=e.CENTER=e.ARIAL_FONT=void 0;var n=u(i(58)),r=u(i(0)),o=u(i(1)),s=i(2),a=i(26);function u(t){return t&&t.__esModule?t:{default:t}}var l=e.ARIAL_FONT="Arial",c=e.CENTER="center",f=e.LEFT="left",h=e.RIGHT="right",d=function(){function t(){var e,i,o,a,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sample text",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black",p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"normal",_=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x:s.gc.originSize.w/2,y:s.gc.originSize.h/2},v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{x:0,y:0},g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{w:100,h:100};(0,r.default)(this,t),this.lineSplitter=(e=new n.default,i=null,o=null,a=!0,function(t,n,r,s,u){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments[6];if(e.has(n)&&t.measureText(n).width===i&&l===o)return e.get(n);o=l;var f=u.w,h=n.split(" "),d=[];h.forEach(function(e){var i=d.length-1,n=t.measureText(d[i]).width+t.measureText(e).width;d[i]&&n<=f?d[i]+=e+" ":(d[i]+="\n",d.push(e+" "))}),a&&(c(Math.ceil(d.length>1?d.length*s/u.h:0)),a=!1);var p=l+Math.floor(u.h/s);return d=d.slice(l,p),e.set(n,d.join("")),i=t.measureText(n).width,d.join("")}),this._text=u,this._coords={x:_.x*s.gc.mult,y:_.y*s.gc.mult},this._style=p,this._font=c,this._color=d,this._size=h*s.gc.mult,this._hidden=!1,this._textAllign=f,this._nowMoving=null,this._offset=v,this._areaSize={w:g.w*s.gc.mult,h:g.h*s.gc.mult},this._animation=null,this._renderText="",this._pages=0,this._page=0}return(0,o.default)(t,[{key:"hide",value:function(){this._hidden=!0}},{key:"getPagesInfo",value:function(){return{current:this._page,max:this._pages}}},{key:"setPages",value:function(t){this._pages=t}},{key:"show",value:function(){this._hidden=!1}},{key:"textAllign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;this._textAllign=t}},{key:"text",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._text=""+t,0!==e&&(this._animation={letterSpeed:e,finalText:t,startLetterTime:(new Date).getTime(),finalTextFormatted:null},this._skippedAnimationSpeed=this._animation.letterSpeed,this._skippedAnimationText=this._animation.finalText)}},{key:"skip",value:function(){this._animation=null}},{key:"next",value:function(){this._page<=this._pages&&(this._skippedAnimationText&&(this._animation={letterSpeed:this._skippedAnimationSpeed,finalText:this._skippedAnimationText,startLetterTime:(new Date).getTime(),finalTextFormatted:null}),this._page+=1)}},{key:"control",value:function(){switch(this._contols){case END_CONTROL:return this.hide();case NEXT_CONTROL:return this.next()}}},{key:"getPos",value:function(){return{x:this._coords.x/s.gc.mult,y:this._coords.y/s.gc.mult}}},{key:"moveTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t={x:t.x*s.gc.mult,y:t.y*s.gc.mult},e){var i=(new Date).getTime(),n={start_x:this._coords.x,start_y:this._coords.y,end_x:t.x-this._coords.x,end_y:t.y-this._coords.y};this._nowMoving={path:n,pos:t,time:e,startTime:i}}else this._coords=t}},{key:"draw",value:function(t){var e=this,i=a.Camera.getCoords(),n=this._text,r=this._font,o=this._size,s=this._coords,u=this._color,l=this._hidden,d=this._textAllign,p=this._nowMoving,_=this._style;if(t.font=_+" "+o+"px "+r,t.fillStyle=u,!l){var v=this._page*Math.floor(this._areaSize.h/this._size);if(p){var g=(new Date).getTime()-p.startTime,y=p.time,m=p.path;if(this._coords={x:m.start_x+m.end_x/y*g,y:m.start_y+m.end_y/y*g},g>=y){var x=p.pos;this._nowMoving=null,this._coords=x}}var w=void 0;switch(d){case c:w=s.x+this._offset.x+(this._areaSize.w-t.measureText(n).width)/2;break;case f:w=s.x+this._offset.x;break;case h:w=s.x+this._areaSize.w+this._offset.x-t.measureText(n).width}if(this._animation){var S=(new Date).getTime()-this._animation.startLetterTime;this._animation.finalTextFormatted&&this._animation.finalTextFormatted.join("")===this.lineSplitter(t,this._animation.finalText,i,this._size,this._areaSize,v,function(t){return e.setPages(t)})||(this._animation.finalTextFormatted=this.lineSplitter(t,this._animation.finalText,i,this._size,this._areaSize,v,function(t){return e.setPages(t)}).split(""));var b=Math.floor(S/this._animation.letterSpeed);this._renderText=this._animation.finalTextFormatted.slice(0,b).join(""),b>=this._animation.finalTextFormatted.length&&(this._text=this._animation.finalText,setTimeout(function(){return e._animation=null},2*this._animation.letterSpeed))}else this._renderText=this.lineSplitter(t,n,i,this._size,this._areaSize,v,function(t){return e.setPages(t)});for(var T=this._renderText.split("\n"),k=0;k<T.length;k++)(k+1)*o>=this._areaSize.h||t.fillText(T[k],w+i.x,s.y+this._offset.y+i.y+this._size*k);!1}}}]),t}();e.Text=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.engineVisual=e.VisualComponent=void 0;var n=u(i(43)),r=u(i(40)),o=u(i(0)),s=u(i(1)),a=i(2);function u(t){return t&&t.__esModule?t:{default:t}}var l=1e3/60,c=function(){function t(){(0,o.default)(this,t),this._renderList=[],this._isDirty=!1}return(0,s.default)(t,[{key:"get",value:function(){return this._renderList}},{key:"add",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach(function(e){t._renderList.push({obj:e,zIndex:1}),t._sortZIndex()})}},{key:"delete",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach(function(e){t._renderList=t._renderList.filter(function(t){return t.obj!==e}),t._sortZIndex()})}},{key:"_sortZIndex",value:function(){this._renderList.sort(function(t,e){return t.zIndex>e.zIndex?1:-1}),this._isDirty=!1}},{key:"getZIndex",value:function(t){return this._renderList.filter(function(e){return t===e.obj})[0].zIndex}},{key:"setZIndex",value:function(t,e){this._renderList.filter(function(e){return t===e.obj})[0].zIndex=e,this._isDirty=!0}},{key:"draw",value:function(t){this._isDirty&&this._sortZIndex(),this._renderList.forEach(function(e){var i=e.obj;i.sprite&&(Array.isArray(i.sprite)?i.sprite.forEach(function(e){return e.draw(t)}):i.sprite.draw(t)),i.collider&&i.collider.update(h.ctx),i.tick(),void 0!==i.ui&&0!==i.ui.length&&i.ui.map(function(e){e.draw(t)})})}}]),t}(),f=e.VisualComponent=function(){function t(){var e,i,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,f=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,d=arguments[2];(0,o.default)(this,t),this._fpsUpdate=(e=0,i=(new Date).getTime(),s=[],function(){var t=(new Date).getTime();t-i>=1e3&&(i=(new Date).getTime());var n=t-e,o=Math.round(n/l);f._keysPressed.forEach(function(t){for(var e=0;e<o;e++)f._callKeysEvents(t)}),s.forEach(function(t){[].concat((0,r.default)(f._keysPressed)).some(function(e){return e===t})||f._callKeysReleaseEvents(t)}),s=[].concat((0,r.default)(f._keysPressed)),e=t}),this.gameWindow=document.getElementById("game_window"),window.onkeydown=function(t){return f._pushKey(t)},window.onkeyup=function(t){return f._releaseKey(t)},this._keysEvents={},this._keysReleaseEvents={},this._keysPressed=new n.default;var p=this.gameWindow;p.style.cursor="none",p.style.width=u+"px",p.style.height=h+"px",p.style.letterSpacing=.5*a.gc.mult+"px",p.width=d.w,p.height=d.h,this.ctx=p.getContext("2d"),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.renderList=new c,this.update()}return(0,s.default)(t,[{key:"addKeysEvent",value:function(t,e){var i=this;Array.isArray(t)||(t=[t]),t.forEach(function(t){i._keysEvents[t]?i._keysEvents[t].push(e):i._keysEvents[t]=[e]})}},{key:"addKeysReleaseEvent",value:function(t,e){var i=this;Array.isArray(t)||(t=[t]),t.forEach(function(t){i._keysReleaseEvents[t]?i._keysReleaseEvents[t].push(e):i._keysReleaseEvents[t]=[e]})}},{key:"_callKeysEvents",value:function(t){this._keysEvents[t]&&this._keysEvents[t].forEach(function(t){return t()})}},{key:"_callKeysReleaseEvents",value:function(t){this._keysReleaseEvents[t]&&this._keysReleaseEvents[t].forEach(function(t){return t()})}},{key:"_pushKey",value:function(t){var e=t.keyCode;(this._keysEvents[e]||this._keysReleaseEvents[e])&&this._keysPressed.add(e)}},{key:"_releaseKey",value:function(t){var e=t.keyCode;this._keysPressed.delete(e)}},{key:"update",value:function(){var t=this.gameWindow,e=this.ctx;e.clearRect(0,0,t.width,t.height),this._fpsUpdate(),this.renderList.draw(e)}}]),t}(),h=e.engineVisual=new f(a.gc.originSize.w*a.gc.mult,a.gc.originSize.h*a.gc.mult,a.gc.srcSize)},function(t,e,i){t.exports={default:i(88),__esModule:!0}},function(t,e){},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n=i(33),r=i(12),o=i(67),s=i(17),a=i(25),u=i(90),l=i(38),c=i(70),f=i(10)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,i,p,_,v,g){u(i,e,p);var y,m,x,w=function(t){if(!h&&t in k)return k[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",b="values"==_,T=!1,k=t.prototype,O=k[f]||k["@@iterator"]||_&&k[_],C=O||w(_),E=_?b?w("entries"):C:void 0,z="Array"==e&&k.entries||O;if(z&&(x=c(z.call(new t)))!==Object.prototype&&x.next&&(l(x,S,!0),n||"function"==typeof x[f]||s(x,f,d)),b&&O&&"values"!==O.name&&(T=!0,C=function(){return O.call(this)}),n&&!g||!h&&!T&&k[f]||s(k,f,C),a[e]=C,a[S]=d,_)if(y={values:b?C:w("values"),keys:v?C:w("keys"),entries:E},g)for(m in y)m in k||o(k,m,y[m]);else r(r.P+r.F*(h||T),e,y);return y}},function(t,e,i){var n=i(16);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(51)("keys"),r=i(37);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(3),r=i(14),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(33)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(54),r=i(10)("iterator"),o=i(25);t.exports=i(3).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){var n=i(49),r=i(10)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){var n=i(37)("meta"),r=i(16),o=i(21),s=i(13).f,a=0,u=Object.isExtensible||function(){return!0},l=!i(24)(function(){return u(Object.preventExtensions({}))}),c=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return l&&f.NEED&&u(t)&&!o(t,n)&&c(t),t}}},function(t,e,i){var n=i(16);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){var n=i(12),r=i(3),o=i(24);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*o(function(){i(1)}),"Object",s)}},function(t,e,i){t.exports={default:i(126),__esModule:!0}},function(t,e,i){e.f=i(10)},function(t,e,i){var n=i(14),r=i(3),o=i(33),s=i(59),a=i(13).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(61),r=i(30),o=i(22),s=i(48),a=i(21),u=i(65),l=Object.getOwnPropertyDescriptor;e.f=i(15)?l:function(t,e){if(t=o(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GRID_SIZE=5},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){t.exports=!i(15)&&!i(24)(function(){return 7!=Object.defineProperty(i(66)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(16),r=i(14).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){t.exports=i(17)},function(t,e,i){var n=i(21),r=i(22),o=i(92)(!1),s=i(50)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),u=0,l=[];for(i in a)i!=s&&n(a,i)&&l.push(i);for(;e.length>u;)n(a,i=e[u++])&&(~o(l,i)||l.push(i));return l}},function(t,e,i){var n=i(49);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(21),r=i(31),o=i(50)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(13).f,r=i(34),o=i(73),s=i(20),a=i(74),u=i(39),l=i(47),c=i(71),f=i(98),h=i(15),d=i(55).fastKey,p=i(56),_=h?"_s":"size",v=function(t,e){var i,n=d(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,l){var c=t(function(t,n){a(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[_]=0,null!=n&&u(n,i,t[l],t)});return o(c.prototype,{clear:function(){for(var t=p(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[_]=0},delete:function(t){var i=p(this,e),n=v(i,t);if(n){var r=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),i._f==n&&(i._f=r),i._l==n&&(i._l=o),i[_]--}return!!n},forEach:function(t){p(this,e);for(var i,n=s(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!v(p(this,e),t)}}),h&&n(c.prototype,"size",{get:function(){return p(this,e)[_]}}),c},def:function(t,e,i){var n,r,o=v(t,e);return o?o.v=i:(t._l=o={i:r=d(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[_]++,"F"!==r&&(t._i[r]=o)),t},getEntry:v,setStrong:function(t,e,i){l(t,e,function(t,i){this._t=p(t,e),this._k=i,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},i?"entries":"values",!i,!0),f(e)}}},function(t,e,i){var n=i(17);t.exports=function(t,e,i){for(var r in e)i&&t[r]?t[r]=e[r]:n(t,r,e[r]);return t}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(18);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,i){var n=i(25),r=i(10)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){"use strict";var n=i(14),r=i(12),o=i(55),s=i(24),a=i(17),u=i(73),l=i(39),c=i(74),f=i(16),h=i(38),d=i(13).f,p=i(99)(0),_=i(15);t.exports=function(t,e,i,v,g,y){var m=n[t],x=m,w=g?"set":"add",S=x&&x.prototype,b={};return _&&"function"==typeof x&&(y||S.forEach&&!s(function(){(new x).entries().next()}))?(x=e(function(e,i){c(e,x,t,"_c"),e._c=new m,null!=i&&l(i,g,e[w],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!y||"clear"!=t)&&a(x.prototype,t,function(i,n){if(c(this,x,t),!e&&y&&!f(i))return"get"==t&&void 0;var r=this._c[t](0===i?0:i,n);return e?this:r})}),y||d(x.prototype,"size",{get:function(){return this._c.size}})):(x=v.getConstructor(e,t,g,w),u(x.prototype,i),o.NEED=!0),h(x,t),b[t]=x,r(r.G+r.W+r.F,b),y||v.setStrong(x,t,g),x}},function(t,e,i){var n=i(49);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(54),r=i(103);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,i){"use strict";var n=i(12);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";var n=i(12),r=i(64),o=i(20),s=i(39);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,a,u=arguments[1];return r(this),(e=void 0!==u)&&r(u),null==t?new this:(i=[],e?(n=0,a=o(u,arguments[2],2),s(t,!1,function(t){i.push(a(t,n++))})):s(t,!1,i.push,i),new this(i))}})}},function(t,e,i){"use strict";e.__esModule=!0;var n=s(i(133)),r=s(i(135)),o="function"==typeof r.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===o(n.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(68),r=i(52).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StarParticle=void 0;var n=h(i(4)),r=h(i(0)),o=h(i(1)),s=h(i(5)),a=h(i(6)),u=h(i(7)),l=i(8),c=i(9),f=i(27);function h(t){return t&&t.__esModule?t:{default:t}}var d=99;e.StarParticle=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:f.BALL_SIZE/2,h:f.BALL_SIZE/2},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return o.sprite=new c.Sprite("img/star/star_yellow.png",{x:0,y:0},{w:350,h:350},t),o.moveTo(i),o.setInit(function(){o.render(),o.setRenderIndex(d)}),o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){t.exports=i(87)},function(t,e,i){"use strict";var n=i(42),r=i(11);setTimeout(function t(){n.engineVisual.update(),requestAnimationFrame(t)},0),r.CoreScene.init()},function(t,e,i){i(44),i(23),i(32),i(97),i(102),i(104),i(105),t.exports=i(3).Set},function(t,e,i){var n=i(45),r=i(46);t.exports=function(t){return function(e,i){var o,s,a=String(r(e)),u=n(i),l=a.length;return u<0||u>=l?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(34),r=i(30),o=i(38),s={};i(17)(s,i(10)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){var n=i(13),r=i(18),o=i(35);t.exports=i(15)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,u=0;a>u;)n.f(t,i=s[u++],e[i]);return t}},function(t,e,i){var n=i(22),r=i(36),o=i(93);t.exports=function(t){return function(e,i,s){var a,u=n(e),l=r(u.length),c=o(s,l);if(t&&i!=i){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===i)return t||c||0;return!t&&-1}}},function(t,e,i){var n=i(45),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e,i){var n=i(14).document;t.exports=n&&n.documentElement},function(t,e,i){"use strict";var n=i(96),r=i(71),o=i(25),s=i(22);t.exports=i(47)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e,i){"use strict";var n=i(72),r=i(56);t.exports=i(77)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(r(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n=i(14),r=i(3),o=i(13),s=i(15),a=i(10)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:n[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(20),r=i(69),o=i(31),s=i(36),a=i(100);t.exports=function(t,e){var i=1==t,u=2==t,l=3==t,c=4==t,f=6==t,h=5==t||f,d=e||a;return function(e,a,p){for(var _,v,g=o(e),y=r(g),m=n(a,p,3),x=s(y.length),w=0,S=i?d(e,x):u?d(e,0):void 0;x>w;w++)if((h||w in y)&&(v=m(_=y[w],w,g),t))if(i)S[w]=v;else if(v)switch(t){case 3:return!0;case 5:return _;case 6:return w;case 2:S.push(_)}else if(c)return!1;return f?-1:l||c?c:S}}},function(t,e,i){var n=i(101);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(16),r=i(78),o=i(10)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(12);n(n.P+n.R,"Set",{toJSON:i(79)("Set")})},function(t,e,i){var n=i(39);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){i(80)("Set")},function(t,e,i){i(81)("Set")},function(t,e,i){t.exports={default:i(107),__esModule:!0}},function(t,e,i){i(23),i(108),t.exports=i(3).Array.from},function(t,e,i){"use strict";var n=i(20),r=i(12),o=i(31),s=i(75),a=i(76),u=i(36),l=i(109),c=i(53);r(r.S+r.F*!i(110)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,f,h=o(t),d="function"==typeof this?this:Array,p=arguments.length,_=p>1?arguments[1]:void 0,v=void 0!==_,g=0,y=c(h);if(v&&(_=n(_,p>2?arguments[2]:void 0,2)),null==y||d==Array&&a(y))for(i=new d(e=u(h.length));e>g;g++)l(i,g,v?_(h[g],g):h[g]);else for(f=y.call(h),i=new d;!(r=f.next()).done;g++)l(i,g,v?s(f,_,[r.value,g],!0):r.value);return i.length=g,i}})},function(t,e,i){"use strict";var n=i(13),r=i(30);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){var n=i(10)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){t.exports={default:i(112),__esModule:!0}},function(t,e,i){i(113);var n=i(3).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(12);n(n.S+n.F*!i(15),"Object",{defineProperty:i(13).f})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;var n=o(i(0)),r=o(i(1));function o(t){return t&&t.__esModule?t:{default:t}}e.Scene=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:123,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,n.default)(this,t),this._params={w:e,h:i},this._objects=r,this._camera=null}return(0,r.default)(t,[{key:"init",value:function(){this._objects.forEach(function(t){return t.init()})}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=e.BORDER=void 0;var n=S(i(116)),r=S(i(123)),o=S(i(43)),s=S(i(40)),a=S(i(58)),u=S(i(4)),l=S(i(0)),c=S(i(1)),f=S(i(5)),h=S(i(6)),d=S(i(7)),p=i(8),_=i(27),v=i(19),g=i(11),y=i(9),m=i(2),x=i(26),w=i(29);function S(t){return t&&t.__esModule?t:{default:t}}var b=1,T=e.BORDER=10*m.gc.modifer,k=function(){var t=[_.BLUE,_.GREEN,_.PINK,_.YELLOW,_.PURPLE];return t[(0,v.getRandom)(0,t.length)]};e.Grid=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,u.default)(e)).call(this));n.saveBalls=function(){return(0,w.localStorageSave)("balls",n.balls.map(function(t){return{color:t.color,x:t.x,y:t.y}}))},n.addToSelection=function(t){n.selection.add(t),t.setRenderIndex(10+n.selection.size)},n.deleteFromSelection=function(t){return n.selection.delete(t)},n.getSelectionColor=function(){var t=new a.default;return[].concat((0,s.default)(n.selection)).forEach(function(e){t.has(e.color)?t.set(e.color,t.get(e.color)+1):t.set(e.color,1)}),[].concat((0,s.default)(t.entries())).sort(function(t,e){return e[1]-t[1]})[0][0]},n.sprite=new y.SquareSprite({w:_.BALL_SIZE*i+T,h:_.BALL_SIZE*i+T},"white",{x:-T/2,y:-T/2},_.BALL_SIZE/2),n.balls=[],n.selection=new o.default,n._bonus=0,n.size=i,n.coords=t,n.sprite.setAlpha(.5),n.moveTo({x:t.x+1.5*m.gc.srcSize.w,y:t.y}),n.helpSpawns=g.GameStates.turns;for(var r=(0,w.localStorageRead)("balls")?(0,w.localStorageRead)("balls"):null,c=0;c<i;c++)for(var h=0;h<i;h++){var d=r?r.shift():null,p=d?d.color:k(),x=d?d.x:h,S=d?d.y:c,O=new _.YarnBall({x:t.x+_.BALL_SIZE*x+1.5*m.gc.srcSize.w,y:t.y+_.BALL_SIZE*S},p);O.sprite[1].rotate((0,v.getRandom)(-90,90)),O.setGridPos({x:x,y:S}),n.balls.push({obj:O,color:p,x:x,y:S})}return(0,w.localStorageRead)("balls")||n.saveBalls(),n.setInit(function(){n.render(),n.setRenderIndex(b),n.balls.forEach(function(t){return t.obj.init()}),n.checkCombos(),n.spawn()}),n}return(0,d.default)(e,t),(0,c.default)(e,[{key:"spawn",value:function(){var t=this,e={x:this.coords.x-60,y:this.coords.y};this.sprite.moveTo(e,300),this.balls.forEach(function(t){t.obj.moveTo({x:e.x+_.BALL_SIZE*t.x,y:e.y+_.BALL_SIZE*t.y},300)}),setTimeout(function(){t.sprite.moveTo(t.coords,100),t.balls.forEach(function(e){e.obj.moveTo({x:t.coords.x+_.BALL_SIZE*e.x,y:t.coords.y+_.BALL_SIZE*e.y},100)})},300)}},{key:"disableColliders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return this.balls.forEach(function(t){return t.obj.collider.disabled=!0}),!1;this.balls.filter(function(e){return e.obj!==t}).forEach(function(t){return t.obj.collider.disabled=!0});var i=this.balls.find(function(e){return e.obj===t}),n=this.getBallNeighbours(i);e&&n.forEach(function(t){return t.obj.collider.disabled=!1})}},{key:"enableColliders",value:function(){this.balls.forEach(function(t){return t.obj.collider.disabled=!1})}},{key:"getBallByPos",value:function(t,e){return this.balls.find(function(i){return i.x===t&&i.y===e})}},{key:"getBallNeighbours",value:function(t){var e=function(e){return e===t.color||t.color===_.MULT||e===_.MULT};return this.balls.filter(function(i){return i.x===t.x-1&&i.y===t.y&&e(i.color)||i.x===t.x+1&&i.y===t.y&&e(i.color)||i.x===t.x&&i.y===t.y+1&&e(i.color)||i.x===t.x&&i.y===t.y-1&&e(i.color)})}},{key:"findPath",value:function(t,e,i){var n=this;e.push(t),i.push(t);var r=this.getBallNeighbours(t).filter(function(t){return t&&!i.find(function(e){return e===t})});return 0===r.length?e:r.map(function(t){var i=[].concat((0,s.default)(e)),r=[].concat((0,s.default)(i));return n.findPath(t,i,r)}).sort(function(t,e){return e.length-t.length})[0]}},{key:"checkCombos",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.balls,i=[],n=[];return e.forEach(function(e){if(~i.indexOf(e))return!1;var r=t.findPath(e,[],[]);i.push.apply(i,(0,s.default)(r));var o=r.length;n.push({color:e.color,size:o})}),n.reduce(function(t,e){return e.size>1&&(t[e.color]?t[e.color]=Math.max(t[e.color],e.size):t[e.color]=e.size),t},{})}},{key:"spawnExtraBalls",value:function(t){for(var e=this,i=[],n=0;n<this.size;n++)for(var o=0;o<this.size;o++)i.push({x:o,y:n});this.balls.forEach(function(t){var e=i.find(function(e){return e.x===t.x&&e.y===t.y});e&&i.splice(i.indexOf(e),1)}),t.forEach(function(n,o){var a=i.pop(),u=a.x,l=a.y,c=k(),f=n;if(f.setGridPos({x:u,y:l}),f.color=c,o>=t.length-1){var h=(0,r.default)(e.checkCombos([].concat((0,s.default)(e.balls),[{obj:f,color:c,x:u,y:l}]))).length>0;if(!h&&e.helpSpawns>0){for(;!h;)c=k(),f.color=c,h=(0,r.default)(e.checkCombos([].concat((0,s.default)(e.balls),[{obj:f,color:c,x:u,y:l}]))).length>0;e.helpSpawns-=1,console.log(e.helpSpawns)}}f.init(),f.sprite[1].setImageSrc((0,_.getColorSrc)(c)),f.sprite[0].setAlpha(0),f.sprite[0].resize(.5),f.sprite[1].setAlpha(0),f.sprite[1].resize(1),f.selected=!1,f.collider.disabled=!0;var d=e.coords.y-_.BALL_SIZE*(e.size-l)-(0,v.getRandom)(0,_.BALL_SIZE/2);f.moveTo({x:e.coords.x+_.BALL_SIZE*u,y:d}),f.sprite[1].setAlpha(1,200);var p=e.coords.y+_.BALL_SIZE*l;f.moveTo({x:e.coords.x+_.BALL_SIZE*u,y:p},(p-d)/5),f.sprite[1].rotate((0,v.getRandom)(-90,90)),e.balls.push({obj:f,color:c,x:u,y:l})}),this.saveBalls(),console.log(this.checkCombos())}},{key:"calculateScores",value:function(){var t=this,e=this.selection.size,i=e*(1+.2*e)*(1+this._bonus),n=new a.default;return[].concat((0,s.default)(this.selection)).forEach(function(t){n.has(t.color)?n.set(t.color,n.get(t.color)+1):n.set(t.color,1)}),[i,[].concat((0,s.default)(n.entries())).map(function(e){return[e[0],e[1]*(1+.2*e[1])*(1+t._bonus)]}).sort(function(t,e){return e[1]-t[1]})]}},{key:"shakeCam",value:function(t){t>=6&&x.Camera.shake(800,6)}},{key:"clearSelection",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(g.MainCursor.moveTo({x:0,y:0}),g.ChangeButtonObj.isChanging){if(2===this.selection.size){var i=[].concat((0,s.default)(this.selection)).map(function(e){return t.balls.find(function(t){return t.obj===e})}),r=(0,n.default)(i,2),a=r[0],u=r[1],l=[a.obj.getCoords(),u.obj.getCoords()],c=l[0],f=l[1],h=[u.x,a.x];a.x=h[0],u.x=h[1];var d=[u.y,a.y];a.y=d[0],u.y=d[1];var p=[u.obj.gridX,a.obj.gridX];a.obj.gridX=p[0],u.obj.gridX=p[1];var v=[u.obj.gridY,a.obj.gridY];a.obj.gridY=v[0],u.obj.gridY=v[1],a.obj.moveTo(f,200),u.obj.moveTo(c,200),this.selection=new o.default,a.obj.reset(),u.obj.reset(),g.ChangeButtonObj.change(),this.saveBalls()}return!1}if(this.selection.size>0&&g.BrushButtonObj.isPainting){var y=[].concat((0,s.default)(this.selection))[0];this.selection.size>1&&[].concat((0,s.default)(this.selection)).forEach(function(t,e){0!==e&&t.reset()}),this.balls.find(function(t){return t.obj===y}).color=_.MULT,y.color=_.MULT,y.reset(!0),g.BrushButtonObj.paint(),this.selection=new o.default,this.saveBalls()}if(this.selection.size<2)this.selection.forEach(function(t){return t.reset()}),this.selection=new o.default,this.enableColliders();else{var m=[],x=[];this.selection.forEach(function(t){var e=t.getCoords();m.push(e.x),x.push(e.y)});var w={x:parseFloat((Math.min.apply(Math,m)+(Math.max.apply(Math,m)+_.BALL_SIZE-Math.min.apply(Math,m))/2).toFixed(0)),y:parseFloat((Math.min.apply(Math,x)+(Math.max.apply(Math,x)+_.BALL_SIZE-Math.min.apply(Math,x))/2).toFixed(0))},S=this.getSelectionColor();this.balls=this.balls.filter(function(e){return!t.selection.has(e.obj)}),[].concat((0,s.default)(this.selection)).sort(function(t,e){return e.gridY-t.gridY}).forEach(function(t){t.clear(w)}),this.disableColliders();var b=this.calculateScores(),T=(0,n.default)(b,2),k=T[0],O=T[1];e&&(g.BigYarnBallObj.spawn(w,S,k),O.forEach(function(t){return g.ScratchCatButtonObj.addProgress(3*t[1],t[0])}),this.shakeCam(this.selection.size),g.Counter.decTurns());var C=[].concat((0,s.default)(this.selection));this.selection=new o.default,setTimeout(function(){return t.spawnExtraBalls(C)},200)}}},{key:"disableBalls",value:function(){this.ballsDisabled=!0,this.balls.forEach(function(t){return t.obj.disabled=!0})}},{key:"enableBalls",value:function(){this.ballsDisabled=!1,this.balls.forEach(function(t){return t.obj.disabled=!1})}},{key:"tick",value:function(){(0,h.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"tick",this).call(this)}}]),e}(p.GameObject)},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(117)),r=o(i(120));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var a,u=(0,r.default)(t);!(n=(a=u.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,i){t.exports={default:i(118),__esModule:!0}},function(t,e,i){i(32),i(23),t.exports=i(119)},function(t,e,i){var n=i(54),r=i(10)("iterator"),o=i(25);t.exports=i(3).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(n(e))}},function(t,e,i){t.exports={default:i(121),__esModule:!0}},function(t,e,i){i(32),i(23),t.exports=i(122)},function(t,e,i){var n=i(18),r=i(53);t.exports=i(3).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,i){t.exports={default:i(124),__esModule:!0}},function(t,e,i){i(125),t.exports=i(3).Object.keys},function(t,e,i){var n=i(31),r=i(35);i(57)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){i(44),i(23),i(32),i(127),i(128),i(129),i(130),t.exports=i(3).Map},function(t,e,i){"use strict";var n=i(72),r=i(56);t.exports=i(77)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){var n=i(12);n(n.P+n.R,"Map",{toJSON:i(79)("Map")})},function(t,e,i){i(80)("Map")},function(t,e,i){i(81)("Map")},function(t,e,i){i(132),t.exports=i(3).Object.getPrototypeOf},function(t,e,i){var n=i(31),r=i(70);i(57)("getPrototypeOf",function(){return function(t){return r(n(t))}})},function(t,e,i){t.exports={default:i(134),__esModule:!0}},function(t,e,i){i(23),i(32),t.exports=i(59).f("iterator")},function(t,e,i){t.exports={default:i(136),__esModule:!0}},function(t,e,i){i(137),i(44),i(140),i(141),t.exports=i(3).Symbol},function(t,e,i){"use strict";var n=i(14),r=i(21),o=i(15),s=i(12),a=i(67),u=i(55).KEY,l=i(24),c=i(51),f=i(38),h=i(37),d=i(10),p=i(59),_=i(60),v=i(138),g=i(78),y=i(18),m=i(16),x=i(22),w=i(48),S=i(30),b=i(34),T=i(139),k=i(62),O=i(13),C=i(35),E=k.f,z=O.f,P=T.f,I=n.Symbol,M=n.JSON,A=M&&M.stringify,j=d("_hidden"),B=d("toPrimitive"),L={}.propertyIsEnumerable,R=c("symbol-registry"),G=c("symbols"),Y=c("op-symbols"),D=Object.prototype,N="function"==typeof I,F=n.QObject,Z=!F||!F.prototype||!F.prototype.findChild,V=o&&l(function(){return 7!=b(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=E(D,e);n&&delete D[e],z(t,e,i),n&&t!==D&&z(D,e,n)}:z,W=function(t){var e=G[t]=b(I.prototype);return e._k=t,e},U=N&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},K=function(t,e,i){return t===D&&K(Y,e,i),y(t),e=w(e,!0),y(i),r(G,e)?(i.enumerable?(r(t,j)&&t[j][e]&&(t[j][e]=!1),i=b(i,{enumerable:S(0,!1)})):(r(t,j)||z(t,j,S(1,{})),t[j][e]=!0),V(t,e,i)):z(t,e,i)},H=function(t,e){y(t);for(var i,n=v(e=x(e)),r=0,o=n.length;o>r;)K(t,i=n[r++],e[i]);return t},X=function(t){var e=L.call(this,t=w(t,!0));return!(this===D&&r(G,t)&&!r(Y,t))&&(!(e||!r(this,t)||!r(G,t)||r(this,j)&&this[j][t])||e)},J=function(t,e){if(t=x(t),e=w(e,!0),t!==D||!r(G,e)||r(Y,e)){var i=E(t,e);return!i||!r(G,e)||r(t,j)&&t[j][e]||(i.enumerable=!0),i}},q=function(t){for(var e,i=P(x(t)),n=[],o=0;i.length>o;)r(G,e=i[o++])||e==j||e==u||n.push(e);return n},Q=function(t){for(var e,i=t===D,n=P(i?Y:x(t)),o=[],s=0;n.length>s;)!r(G,e=n[s++])||i&&!r(D,e)||o.push(G[e]);return o};N||(a((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(i){this===D&&e.call(Y,i),r(this,j)&&r(this[j],t)&&(this[j][t]=!1),V(this,t,S(1,i))};return o&&Z&&V(D,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",function(){return this._k}),k.f=J,O.f=K,i(84).f=T.f=q,i(61).f=X,i(83).f=Q,o&&!i(33)&&a(D,"propertyIsEnumerable",X,!0),p.f=function(t){return W(d(t))}),s(s.G+s.W+s.F*!N,{Symbol:I});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)d($[tt++]);for(var et=C(d.store),it=0;et.length>it;)_(et[it++]);s(s.S+s.F*!N,"Symbol",{for:function(t){return r(R,t+="")?R[t]:R[t]=I(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),s(s.S+s.F*!N,"Object",{create:function(t,e){return void 0===e?b(t):H(b(t),e)},defineProperty:K,defineProperties:H,getOwnPropertyDescriptor:J,getOwnPropertyNames:q,getOwnPropertySymbols:Q}),M&&s(s.S+s.F*(!N||l(function(){var t=I();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(m(e)||void 0!==t)&&!U(t))return g(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!U(e))return e}),n[1]=e,A.apply(M,n)}}),I.prototype[B]||i(17)(I.prototype,B,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(t,e,i){var n=i(35),r=i(83),o=i(61);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var s,a=i(t),u=o.f,l=0;a.length>l;)u.call(t,s=a[l++])&&e.push(s);return e}},function(t,e,i){var n=i(22),r=i(84).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(n(t))}},function(t,e,i){i(60)("asyncIterator")},function(t,e,i){i(60)("observable")},function(t,e,i){t.exports={default:i(143),__esModule:!0}},function(t,e,i){i(144);var n=i(3).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,i){var n=i(22),r=i(62).f;i(57)("getOwnPropertyDescriptor",function(){return function(t,e){return r(n(t),e)}})},function(t,e,i){t.exports={default:i(146),__esModule:!0}},function(t,e,i){i(147),t.exports=i(3).Object.setPrototypeOf},function(t,e,i){var n=i(12);n(n.S,"Object",{setPrototypeOf:i(148).set})},function(t,e,i){var n=i(16),r=i(18),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(20)(Function.call,i(62).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){t.exports={default:i(150),__esModule:!0}},function(t,e,i){i(151);var n=i(3).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){var n=i(12);n(n.S,"Object",{create:i(34)})},function(t,e,i){"use strict";function n(t,e,i,n){var r,o=!1,s=0;function a(){r&&clearTimeout(r)}function u(){var u=this,l=Date.now()-s,c=arguments;function f(){s=Date.now(),i.apply(u,c)}o||(n&&!r&&f(),a(),void 0===n&&l>t?f():!0!==e&&(r=setTimeout(n?function(){r=void 0}:f,void 0===n?t-l:t)))}return"boolean"!=typeof e&&(n=i,i=e,e=void 0),u.cancel=function(){a(),o=!0},u}function r(t,e,i){return void 0===i?n(t,e,!1):n(t,i,!1!==e)}i.r(e),i.d(e,"throttle",function(){return n}),i.d(e,"debounce",function(){return r})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCollides=void 0;var n=i(2);e.isCollides=function(t,e){var i=Math.max(t[0][0],e[0][0]),r=Math.min(t[1][0],e[1][0]),o=Math.max(t[0][1],e[0][1]),s=Math.min(t[1][1],e[1][1]),a=r+n.gc.mult-i,u=s+n.gc.mult-o;return!(a<0||u<0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getCoordsArr=function(t){var e=t.coords,i=t.offset,n=t.size;return[[e.x+i.x,e.y+i.y],[e.x+i.x+n.w,e.y+i.y+n.h]]}},function(t,e,i){t.exports={default:i(156),__esModule:!0}},function(t,e,i){var n=i(3),r=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cursor=void 0;var n=d(i(4)),r=d(i(0)),o=d(i(1)),s=d(i(5)),a=d(i(6)),u=d(i(7)),l=i(8),c=i(28),f=i(2),h=i(11);function d(t){return t&&t.__esModule?t:{default:t}}var p=99,_=10*f.gc.modifer;e.Cursor=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return i.collider=new c.Collider({x:0,y:0},{w:_,h:_},{x:0,y:0}),i.moveTo(t),i.followTouch=function(t){var e=f.gc.srcSize.w/window.innerWidth,n=f.gc.srcSize.h/window.innerHeight,r={x:t.touches[0].clientX*e-_/2,y:t.touches[0].clientY*n-_/2};i.moveTo(r)},i.touches=[],i.hold=!1,i.hasMoved=!1,i.setInit(function(){i.render(),i.setRenderIndex(p),window.ontouchstart=function(t){i.touches.length<1&&(i.touches.push(t.touches[0].identifier),i.hold=!0,i.followTouch(t))},window.ontouchmove=function(t){1===i.touches.length&&(i.hasMoved=!0,i.followTouch(t))},window.ontouchend=function(t){1===i.touches.length&&i.touches[0]===t.changedTouches[0].identifier&&(i.touches=[],i.hold=!1,i.hasMoved=!1,!h.YarnGrid.ballsDisabled&&h.YarnGrid.clearSelection())}}),i}return(0,u.default)(e,t),(0,o.default)(e,[{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BigYarnBall=e.SHADOW_SIZE=e.BALL_SIZE=void 0;var n=v(i(4)),r=v(i(0)),o=v(i(1)),s=v(i(5)),a=v(i(6)),u=v(i(7)),l=i(8),c=i(9),f=i(19),h=i(27),d=i(11),p=i(2),_=i(85);function v(t){return t&&t.__esModule?t:{default:t}}var g=e.BALL_SIZE=60*p.gc.modifer,y=e.SHADOW_SIZE=72*p.gc.modifer;e.BigYarnBall=function(t){function e(t,i){(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return o.sprite=[new c.Sprite("img/YarnBalls/png/yarn_shadow.png",{x:0,y:0},{w:500,h:500},{w:y,h:y},{x:(g-y)/2,y:(g-y)/2}),new c.Sprite((0,h.getColorSrc)(i),{x:0,y:0},{w:370,h:370},{w:g,h:g})],o.sprite[0].resize(.5),o.sprite[0].setAlpha(0),o.moveTo(t),o.startParticles=[],o.color=i,o.sprite[1].setAlpha(0),o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"_clearAnimationPlan",value:function(){this._animationPlan&&(clearTimeout(this._animationPlan),this._animationPlan=null)}},{key:"spawn",value:function(t,e,i){var n=this;this.sprite[1].setImageSrc((0,h.getColorSrc)(e)),this.color=e,this.render(),this.setRenderIndex(40);var r={x:t.x-g/2,y:t.y-g/2};this.moveTo(r);var o=Math.min(Math.max(1.5,i/3),2.5);this.sprite[0].resize(.5),this.sprite[1].resize(.5*o),this.sprite[0].setAlpha(0),this._clearAnimationPlan(),this.sprite[1].setAlpha(1,200),this.sprite[1].rotate((0,f.getRandom)(30,80),400),this.sprite[0].setAlpha(.2,240),this.sprite[0].resize(1.2*o,240),this.sprite[1].resize(1.2*o,240),this.moveTo({x:r.x,y:r.y+150},100),setTimeout(function(){return n.moveTo(r,100)},100),this._animationPlan=setTimeout(function(){n.sprite[0].resize(o,160),n.sprite[1].resize(o,160)},240),d.Paw.collectBall(t,g*o);for(var s=0;s<i;s++)this.startParticles.push(new _.StarParticle);this.startParticles.forEach(function(e){e.init();var n=20*i*p.gc.modifer;e.moveTo({x:t.x+(0,f.getRandom)(-n,n),y:t.y+(0,f.getRandom)(-n,n)}),e.sprite.resize(.5),e.sprite.setAlpha(0),e.sprite.resize(1.5,200),e.sprite.setAlpha(1,200),e.moveTo({x:d.ScoreBar.getCoords().x+d.ScoreBar.getProgress()/100*d.ScoreBar.sprite[0].getSize().w-e.sprite.getSize().w,y:d.ScoreBar.getCoords().y+(d.ScoreBar.sprite[0].getSize().h-e.sprite.getSize().h)/2},800),e.sprite.rotate(360,800,!0),setTimeout(function(){e.sprite.resize(.5,200),e.sprite.setAlpha(0,200)},600),setTimeout(function(){e.renderClear()},800)}),setTimeout(function(){d.ScoreBar.addProgress(i),n.startParticles=[]},700)}},{key:"clear",value:function(){this.renderClear()}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PawCollector=void 0;var n=p(i(4)),r=p(i(0)),o=p(i(1)),s=p(i(5)),a=p(i(6)),u=p(i(7)),l=i(8),c=i(9),f=i(2),h=i(19),d=i(11);function p(t){return t&&t.__esModule?t:{default:t}}var _=41,v=375*f.gc.modifer,g=94*f.gc.modifer;e.PawCollector=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return i.sprite=new c.Sprite("img/Paws/paw.png",{x:0,y:0},{w:2e3,h:500},{w:v,h:g}),i.moveTo(t),i.setInit(function(){i.render(),i.setRenderIndex(_)}),i}return(0,u.default)(e,t),(0,o.default)(e,[{key:"collectBall",value:function(t,e){var i=this;d.ScratchCatButtonObj.disabled=!0;var n=void 0;n=t.x>f.gc.srcSize.w/2||t.x===f.gc.srcSize.w/2&&0===(0,h.getRandom)(0,2);var r=(0,h.getRandom)(-15,15),o=r*Math.PI/180,s=n?-1:1,a=s*v/2*(1-Math.cos(o)),u=s*v/2*Math.sin(o);this.sprite.rotate(n?0-r:180-r);var l=n?f.gc.srcSize.w+e:0-v-e,c={x:t.x+a,y:t.y-g/2+u},p=(0,h.getRandom)(10,60);c.x=n?c.x-e/2+p:c.x-v+e/2-p;var _=(f.gc.modifer/1.5).toFixed(2),y=Math.abs(l-c.x)/_;this.moveTo({x:l,y:c.y+u}),this.moveTo(c,y),setTimeout(function(){i.moveTo({x:l,y:c.y+u},y);var t=n?l:l+v;d.BigYarnBallObj.moveTo({x:t,y:d.BigYarnBallObj.getCoords().y+u},Math.abs(t-d.BigYarnBallObj.getCoords().x)/_)},y),setTimeout(function(){d.BigYarnBallObj.clear(),d.YarnGrid.enableColliders(),d.ScratchCatButtonObj.disabled=!1},2*y)}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScratchCat=void 0;var n=v(i(4)),r=v(i(0)),o=v(i(1)),s=v(i(5)),a=v(i(6)),u=v(i(7)),l=i(8),c=i(9),f=i(2),h=i(19),d=i(11),p=i(27),_=i(26);function v(t){return t&&t.__esModule?t:{default:t}}var g=200*f.gc.modifer,y=200*f.gc.modifer;e.ScratchCat=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return i.sprite=new c.Sprite("img/catScratch/cat_scratch.png",{x:0,y:0},{w:800,h:800},{w:g,h:y}),i.moveTo(t),i.setInit(function(){}),i}return(0,u.default)(e,t),(0,o.default)(e,[{key:"attack",value:function(t){var e=this,i=d.YarnGrid.coords.x+p.BALL_SIZE*(t+1)-p.BALL_SIZE/2-g/2;this.render(),this.setRenderIndex(99),d.YarnGrid.disableBalls();var n=(0,h.getRandom)(-10,10);this.sprite.resize(3),this.sprite.setAlpha(0),this.moveTo({x:i,y:d.YarnGrid.coords.y-50}),this.sprite.rotate(n),this.sprite.setAlpha(1,300),this.sprite.resize(1,300),this.moveTo({x:i,y:d.YarnGrid.coords.y-200},150),setTimeout(function(){e.moveTo({x:i,y:d.YarnGrid.coords.y-50},150)},150),setTimeout(function(){_.Camera.shake(300,8);var r=(f.gc.srcSize.h-e.getCoords().y)/1;e.sprite.rotate(n<0?n+10:n-10,1e3),e.moveTo({x:i,y:f.gc.srcSize.h},r),d.YarnGrid.balls.filter(function(e){return e.x===t||e.x===t-1||e.x===t+1}).reduce(function(t,e){return t[e.y]?t[e.y].push(e):t[e.y]=[e],t},[]).forEach(function(t,e){setTimeout(function(){t.forEach(function(t){return t.obj.sprite[1].setAlpha(0,100)}),t.forEach(function(t){d.YarnGrid.addToSelection(t.obj),t.obj.moveTo({x:t.obj.getCoords().x,y:t.obj.getCoords().y+p.BALL_SIZE/2},1e3)})},(e+1)*(p.BALL_SIZE/1))}),setTimeout(function(){d.ScoreBar.addProgress(d.ScoreBar.getMaxScore()/5,!0)},r/2),setTimeout(function(){e.renderClear(),d.YarnGrid.clearSelection(!1),setTimeout(function(){return d.YarnGrid.enableBalls()},200)},r)},300)}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0;var n=f(i(4)),r=f(i(0)),o=f(i(1)),s=f(i(5)),a=f(i(6)),u=f(i(7)),l=i(8),c=i(9);function f(t){return t&&t.__esModule?t:{default:t}}var h=0;e.Background=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{w:300,h:300},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{w:40,h:40},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0},l=arguments[5];(0,r.default)(this,e);var f=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return f.sprite=new c.Sprite(t,i,o,a,u),f.moveTo(l),f.setInit(function(){f.render(),f.setRenderIndex(h)}),f}return(0,u.default)(e,t),(0,o.default)(e,[{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScratchCatButton=e.BLUE_SPRITE=e.GREEN_SPRITE=e.PINK_SPRITE=e.YELLOW_SPRITE=e.PURPLE_SPRITE=void 0;var n=y(i(4)),r=y(i(0)),o=y(i(1)),s=y(i(5)),a=y(i(6)),u=y(i(7)),l=i(8),c=i(9),f=i(28),h=i(11),d=i(19),p=i(2),_=i(27),v=i(29),g=i(63);function y(t){return t&&t.__esModule?t:{default:t}}var m=10,x=e.PURPLE_SPRITE="img/cat_button/cat_button_purple.png",w=e.YELLOW_SPRITE="img/cat_button/cat_button_yellow.png",S=e.PINK_SPRITE="img/cat_button/cat_button_pink.png",b=e.GREEN_SPRITE="img/cat_button/cat_button_green.png",T=e.BLUE_SPRITE="img/cat_button/cat_button_blue.png";e.ScratchCatButton=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:260,h:152},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return o._maxProgressOffset=380,o.sprite=[new c.Sprite("img/cat_button/cat_button_empty.png",{x:0,y:0},{w:650,h:380},t),new c.Sprite(x,{x:0,y:0},{w:650,h:380},t,{x:0,y:0})],o.collider=new f.Collider({x:0,y:0},{w:t.w-20*p.gc.modifer,h:t.h-20*p.gc.modifer},{x:10*p.gc.modifer,y:10*p.gc.modifer}),o.collider.addInteractionObject(h.MainCursor),o.moveTo(i),o.disabled=!0,o._pushed=!1,o._isAnimated=!1,o._progress=0,o.setInit(function(){o.render(),o.setRenderIndex(m),o.sprite[1].setInnerOffset({x:0,y:o._maxProgressOffset}),o.sprite[1].setOffset({x:0,y:o.sprite[1].getSize().h}),o.spawn(!(0,v.localStorageRead)("ScratchCatButton"))}),o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"spawn",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?300:0;this.sprite.forEach(function(t){t.setAlpha(0),t.resize(.8),t.setAlpha(1,.75*e),t.resize(1.025,.75*e),setTimeout(function(){t.setAlpha(1,.25*e),t.resize(1,.25*e)},.75*e)}),setTimeout(function(){var e=(0,v.localStorageRead)("ScratchCatButton");e&&t.addProgress(e.val,e.color,!0)},1.1*e)}},{key:"getSrcByColor",value:function(t){switch(t){case _.PURPLE:return x;case _.GREEN:return b;case _.PINK:return S;case _.BLUE:return T;case _.YELLOW:return w}}},{key:"addProgress",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.PURPLE,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i===_.MULT)return!1;if(this._nowColor||(this._nowColor={src:this.getSrcByColor(i),color:i},this.sprite[1].setImageSrc(this._nowColor.src)),this._progress<100&&i===this._nowColor.color){var r=(0,v.localStorageRead)("ScratchCatButton");!n&&(0,v.localStorageSave)("ScratchCatButton",{val:r?r.val+t:t,color:i});var o=this._progress+t>100?100-this._progress:t;this._progress=Math.min(this._progress+t,100),this.sprite[1].setInnerOffset({x:0,y:this._maxProgressOffset-this._maxProgressOffset*this._progress/100},400),this.sprite[1].setOffset({x:0,y:this.sprite[1].getOffset().y-this.sprite[1].getSize().h*o/100},400),this._progress>=100&&setTimeout(function(){e.sprite[1].resize(1.2,300),setTimeout(function(){return e.sprite[1].resize(1,100)},100),setTimeout(function(){return e.disabled=!1},300)},400)}}},{key:"resetProgress",value:function(){this._progress=0,this.disabled=!0,this.sprite[1].setInnerOffset({x:0,y:this._maxProgressOffset},500),this.sprite[1].setOffset({x:0,y:this.sprite[1].getSize().h},500),(0,v.localStorageSave)("ScratchCatButton",null)}},{key:"push",value:function(){var t=this;this._isAnimated||this.disabled||h.ChangeButtonObj.isChanging||h.BrushButtonObj.isPainting||(this._pushed=!0,this.sprite[0].resize(.95,100),this.sprite[1].resize(.95,100),this._isAnimated=!0,setTimeout(function(){return t._isAnimated=!1},100))}},{key:"unpush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._isAnimated||(this._isAnimated=!0,this.sprite[0].resize(1,100),this.sprite[1].resize(1,100),e&&(setTimeout(function(){t.resetProgress()},100),h.ScratchCatObj.attack((0,d.getRandom)(1,g.GRID_SIZE-1)),this._nowColor=null),setTimeout(function(){t._pushed=!1,t._isAnimated=!1},100))}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this),!h.GameStates.gameOver&&this.collider.getInteractions().has(h.MainCursor.collider)&&!this.disabled&&!h.MainCursor.hasMoved&&this._progress>=100?this._pushed||this.push():this._pushed&&(h.MainCursor.hold?this.unpush(!1):this.unpush(!0))}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScoreProgressBar=void 0;var n=v(i(4)),r=v(i(0)),o=v(i(1)),s=v(i(5)),a=v(i(6)),u=v(i(7)),l=i(8),c=i(9),f=i(85),h=i(19),d=i(2),p=i(11),_=i(29);function v(t){return t&&t.__esModule?t:{default:t}}var g=10;e.ScoreProgressBar=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:260,h:152},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return o.saveProgress=function(){return(0,_.localStorageSave)("scoreBar",o._progress)},o._maxProgressWidth=1360,o._maxProgressHeight=200,o._startWidth=t.w,o._fillStartX=21,o.sprite=[new c.Sprite("img/ProgressBar/bar_1.png",{x:0,y:0},{w:o._maxProgressWidth,h:o._maxProgressHeight},t),new c.Sprite("img/ProgressBar/bar_2.png",{x:0,y:0},{w:o._maxProgressWidth,h:o._maxProgressHeight},t,{x:0,y:0})],o.moveTo(i),o._progress=0,o._maxScore=100,o._particles=[],o.setInit(function(){o.render(),o.setRenderIndex(g);for(var t=0;t<10;t++)o._particles.push(new f.StarParticle);o.spawn()}),o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"spawn",value:function(){var t=this;this.setStartPoint();this.sprite[0].setAlpha(0),this.sprite[0].resize(.8),this.sprite[0].setAlpha(1,225),this.sprite[0].resize(1.05,225),setTimeout(function(){t.sprite[0].resize(1,75)},225)}},{key:"setStartPoint",value:function(){this.sprite[1].setInnerSize({w:this._fillStartX,h:this._maxProgressHeight}),this.sprite[1].setSize({w:this._fillStartX/d.gc.modifer,h:this.sprite[1].getSize().h}),this.addProgress((0,_.localStorageRead)("scoreBar"),!1,!0)}},{key:"getProgress",value:function(){return this._progress}},{key:"setMaxScore",value:function(t){this._maxScore=t}},{key:"getMaxScore",value:function(){return this._maxScore}},{key:"addProgress",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t/this._maxScore*100;if(!n&&(0,_.localStorageSave)("scoreBar",(0,_.localStorageRead)("scoreBar")+t),this._progress<100){if(i){this._particles.forEach(function(t){t.init(),t.moveTo({x:e.sprite[0].getCoords().x+e.sprite[0].getSize().w/2-t.sprite.getSize().w/2+(0,h.getRandom)(-200*d.gc.modifer,200*d.gc.modifer),y:e.sprite[0].getCoords().y+e.sprite[0].getSize().h/2-t.sprite.getSize().h/2+(0,h.getRandom)(-200*d.gc.modifer,200*d.gc.modifer)}),t.sprite.setAlpha(0),t.sprite.resize(1.5),t.sprite.rotate(360,650,!0),t.sprite.setAlpha(1,162.5),t.sprite.resize(.5,650),setTimeout(function(){t.sprite.setAlpha(0,162.5)},487.5),t.moveTo({x:e.sprite[0].getCoords().x+e.sprite[0].getSize().w/2-t.sprite.getSize().w/2,y:e.sprite[0].getCoords().y+e.sprite[0].getSize().h/2-t.sprite.getSize().h/2},650)})}setTimeout(function(){var t=e._progress+r>100?100-e._progress:r;if(e._progress=Math.min(e._progress+r,100),e.sprite[1].setInnerSize({w:e._fillStartX+(e._maxProgressWidth-e._fillStartX)*e._progress/100,h:e._maxProgressHeight},400),e.sprite[1].setSize({w:e.sprite[1].getSize().w+(e._startWidth-e._fillStartX/d.gc.modifer)*t/100,h:e.sprite[1].getSize().h},400),e._progress>=100){var i=0,n=p.Counter.getTurns()/p.GameStates.turns;n>.1&&(i+=1),n>.25&&(i+=1),n>.5&&(i+=1),p.GameStates.gameOver=!0,p.EndPlate.spawn(!0,i)}},i?520:0)}}},{key:"resetProgress",value:function(){this._progress=0,this.setStartPoint()}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TurnsCounter=void 0;var n=_(i(4)),r=_(i(0)),o=_(i(1)),s=_(i(5)),a=_(i(6)),u=_(i(7)),l=i(8),c=i(9),f=i(41),h=i(2),d=i(11),p=i(29);function _(t){return t&&t.__esModule?t:{default:t}}var v=10;e.TurnsCounter=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{w:0,h:0},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return a.sprite=new c.Sprite("img/turns_counter/counter.png",{x:0,y:0},{w:610,h:310},i),a.moveTo(t),a._turns=(0,p.localStorageRead)("turnsCounter")?(0,p.localStorageRead)("turnsCounter"):o,a.text=new f.Text(""+a._turns,f.ARIAL_FONT,27*h.gc.modifer,"white","bold",{x:a.getCoords().x,y:a.getCoords().y},{x:40*h.gc.modifer,y:33*h.gc.modifer},{w:50*h.gc.modifer,h:30*h.gc.modifer}),a.text.textAllign(f.CENTER),a.ui=[a.text],a.setInit(function(){a.render(),a.setRenderIndex(v),a.spawn()}),a}return(0,u.default)(e,t),(0,o.default)(e,[{key:"incTurns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._turns=""+(parseFloat(this._turns)+t),this.text.text(this._turns),(0,p.localStorageSave)("turnsCounter",this._turns)}},{key:"decTurns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this._turns<=0)return!1;this._turns=""+(parseFloat(this._turns)-t),this.text.text(this._turns),this._turns<=0&&(d.GameStates.gameOver=!0),(0,p.localStorageSave)("turnsCounter",this._turns)}},{key:"getTurns",value:function(){return this._turns}},{key:"spawn",value:function(){var t=this;this.sprite.resize(.9),this.sprite.setAlpha(0),this.sprite.setAlpha(1,300),this.sprite.resize(1.05,225),setTimeout(function(){t.sprite.resize(1,75)},225)}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EndLevelPlate=void 0;var n=p(i(4)),r=p(i(0)),o=p(i(1)),s=p(i(5)),a=p(i(6)),u=p(i(7)),l=i(8),c=i(9),f=i(2),h=i(41),d=i(166);function p(t){return t&&t.__esModule?t:{default:t}}var _=99,v=60*f.gc.modifer;e.EndLevelPlate=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{w:400,h:292.5};(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this)),a=4*i.w;return o.sprite=[new c.SquareSprite(f.gc.srcSize,"white",{x:-t.x,y:-t.y}),new c.Sprite("img/rays/rays.png",{x:0,y:0},{w:1e3,h:1e3},{w:a,h:a},{x:-a/2+i.w/2,y:-a/2+i.h/2}),new c.Sprite("img/plate/plate.png",{x:0,y:0},{w:1600,h:1170},i)],o.sprite[0].setAlpha(0),o.sprite[1].setAlpha(0),o.sprite[2].setAlpha(0),o.sprite[1].resize(0),o.sprite[2].resize(.8),o.text=new h.Text("",h.ARIAL_FONT,23*f.gc.modifer,"#9f91cc","bold",{x:o.getCoords().x,y:o.getCoords().y},{x:0,y:60*f.gc.modifer},{w:i.w,h:28*f.gc.modifer}),o.text.textAllign(h.CENTER),o.ui=[o.text],o.stars=[new d.Star({x:0,y:0},{w:v,h:v}),new d.Star({x:0,y:0},{w:v,h:v}),new d.Star({x:0,y:0},{w:v,h:v})],o.moveTo(t),o.setInit(function(){o.render(),o.setRenderIndex(_)}),o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"spawn",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.sprite[0].setColor(e?"white":"black"),this.sprite[0].setAlpha(.9,200),setTimeout(function(){t.sprite[2].setAlpha(1,100),e&&(t.sprite[1].resize(1,400),t.sprite[1].setAlpha(.25,400),t.sprite[1].rotate(360,15e3,!0)),t.sprite[2].resize(1.05,150),setTimeout(function(){t.sprite[2].resize(1,50),setTimeout(function(){t.stars.forEach(function(e,n){e.init();var r=t.sprite[2].getCoords(),o=(t.sprite[2].getSize().w-(3*v+20*f.gc.modifer))/2;e.moveTo({x:r.x+o+v*n+10*n*f.gc.modifer,y:r.y+80*f.gc.modifer}),setTimeout(function(){return e.spawn(n<i)},200*n)})},50)},150),t.text.text(e?"Level Completed":"Level Failed",50)},400)}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;var n=f(i(4)),r=f(i(0)),o=f(i(1)),s=f(i(5)),a=f(i(6)),u=f(i(7)),l=i(8),c=i(9);function f(t){return t&&t.__esModule?t:{default:t}}var h=100;e.Star=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{w:50,h:50};(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return o.sprite=new c.Sprite("img/plate/s1.png",{x:0,y:0},{w:300,h:300},i),o.moveTo(t),o.sprite.setAlpha(0),o.sprite.resize(1.5),o.setInit(function(){o.render(),o.setRenderIndex(h)}),o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"spawn",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.sprite.setImageSrc(t?"img/plate/s1.png":"img/plate/s2.png"),this.sprite.setAlpha(1,300),this.sprite.resize(1,300)}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this)}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrushButton=void 0;var n=v(i(4)),r=v(i(0)),o=v(i(1)),s=v(i(5)),a=v(i(6)),u=v(i(7)),l=i(8),c=i(9),f=i(41),h=i(2),d=i(28),p=i(11),_=i(29);function v(t){return t&&t.__esModule?t:{default:t}}var g=80;e.BrushButton=function(t){function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return a.sprite=[new c.Sprite("img/brush_button/brush_button.png",{x:0,y:0},{w:405,h:405},i),new c.Sprite("img/brush_button/cancel.png",{x:0,y:0},{w:405,h:405},i),new c.Sprite("img/brush_button/button_counter.png",{x:0,y:0},{w:205,h:205},{w:i.w/2,h:i.h/2},{x:i.w-.4*i.w,y:i.h-.4*i.h})],a.collider=new d.Collider({x:0,y:0},{w:i.w-10*h.gc.modifer,h:i.h-20*h.gc.modifer},{x:5*h.gc.modifer,y:10*h.gc.modifer}),a.collider.addInteractionObject(p.MainCursor),a.value=null!==(0,_.localStorageRead)("BrushButton")?(0,_.localStorageRead)("BrushButton"):o,a.text=new f.Text(""+a.value,f.ARIAL_FONT,20*h.gc.modifer,"#9123cd","bold",{x:a.getCoords().x,y:a.getCoords().y},{x:23*h.gc.modifer,y:60*h.gc.modifer},{w:i.w,h:28*h.gc.modifer}),a.disabled=!1,a._pushed=!1,a._isAnimated=!1,a.isPainting=!1,a.text.textAllign(f.CENTER),a.ui=[a.text],a.moveTo(t),a.setInit(function(){a.render(),a.setRenderIndex(g),a.sprite[1].resize(0),0===a.value&&a.disable()}),a}return(0,u.default)(e,t),(0,o.default)(e,[{key:"push",value:function(){var t=this;this._isAnimated||this.disabled||!(this.value>0||this.isPainting)||p.ChangeButtonObj.isChanging||(this._pushed=!0,this.sprite[0].resize(.95,100),this.isPainting&&this.sprite[1].resize(.95,100),this._isAnimated=!0,setTimeout(function(){return t._isAnimated=!1},100))}},{key:"disable",value:function(){this.sprite[0].setAlpha(.7,300),this.sprite[2].setAlpha(.7,300)}},{key:"paint",value:function(){this.isPainting=!1,this.sprite[1].resize(0,100),(0,_.localStorageSave)("BrushButton",this.value),this.value<=0&&this.disable()}},{key:"activate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.value-=1:this.value+=1,this.text.text(this.value),this.sprite[1].resize(t?1:0,100)}},{key:"unpush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._isAnimated||(this._isAnimated=!0,this.sprite[0].resize(1,100),e&&(this.isPainting?(this.isPainting=!1,this.activate(!1)):(this.isPainting=!0,this.activate(!0))),setTimeout(function(){t._pushed=!1,t._isAnimated=!1},100))}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this),p.GameStates.gameOver||!this.collider.getInteractions().has(p.MainCursor.collider)||this.disabled||p.MainCursor.hasMoved?this._pushed&&this.unpush(!p.MainCursor.hold):this._pushed||this.push()}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChangeButton=void 0;var n=v(i(4)),r=v(i(0)),o=v(i(1)),s=v(i(5)),a=v(i(6)),u=v(i(7)),l=i(8),c=i(9),f=i(41),h=i(2),d=i(28),p=i(11),_=i(29);function v(t){return t&&t.__esModule?t:{default:t}}var g=80;e.ChangeButton=function(t){function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return a.sprite=[new c.Sprite("img/change_button/change_button.png",{x:0,y:0},{w:405,h:405},i),new c.Sprite("img/brush_button/cancel.png",{x:0,y:0},{w:405,h:405},i),new c.Sprite("img/brush_button/button_counter.png",{x:0,y:0},{w:205,h:205},{w:i.w/2,h:i.h/2},{x:i.w-.4*i.w,y:i.h-.4*i.h})],a.collider=new d.Collider({x:0,y:0},{w:i.w-10*h.gc.modifer,h:i.h-20*h.gc.modifer},{x:5*h.gc.modifer,y:10*h.gc.modifer}),a.collider.addInteractionObject(p.MainCursor),a.value=null!==(0,_.localStorageRead)("ChangeButton")?(0,_.localStorageRead)("ChangeButton"):o,a.text=new f.Text(""+a.value,f.ARIAL_FONT,20*h.gc.modifer,"#9123cd","bold",{x:a.getCoords().x,y:a.getCoords().y},{x:23*h.gc.modifer,y:60*h.gc.modifer},{w:i.w,h:28*h.gc.modifer}),a.disabled=0===a.value,a._pushed=!1,a._isAnimated=!1,a.isChanging=!1,a.text.textAllign(f.CENTER),a.ui=[a.text],a.moveTo(t),a.setInit(function(){a.render(),a.setRenderIndex(g),a.sprite[1].resize(0),0===a.value&&a.disable()}),a}return(0,u.default)(e,t),(0,o.default)(e,[{key:"push",value:function(){var t=this;this._isAnimated||this.disabled||!(this.value>0||this.isChanging)||p.BrushButtonObj.isPainting||(this._pushed=!0,this.sprite[0].resize(.95,100),this.isChanging&&this.sprite[1].resize(.95,100),this._isAnimated=!0,setTimeout(function(){return t._isAnimated=!1},100))}},{key:"disable",value:function(){this.sprite[0].setAlpha(.7,300),this.sprite[2].setAlpha(.7,300)}},{key:"change",value:function(){this.isChanging=!1,this.sprite[1].resize(0,100),(0,_.localStorageSave)("ChangeButton",this.value),this.value<=0&&this.disable()}},{key:"activate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.value-=1:this.value+=1,this.text.text(this.value),this.sprite[1].resize(t?1:0,100)}},{key:"unpush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._isAnimated||(this._isAnimated=!0,this.sprite[0].resize(1,100),e&&(this.isChanging?(this.isChanging=!1,this.activate(!1)):(this.isChanging=!0,this.activate(!0))),setTimeout(function(){t._pushed=!1,t._isAnimated=!1},100))}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this),p.GameStates.gameOver||!this.collider.getInteractions().has(p.MainCursor.collider)||this.disabled||p.MainCursor.hasMoved?this._pushed&&this.unpush(!p.MainCursor.hold):this._pushed||this.push()}}]),e}(l.GameObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddTurnsButton=void 0;var n=p(i(4)),r=p(i(0)),o=p(i(1)),s=p(i(5)),a=p(i(6)),u=p(i(7)),l=i(8),c=i(9),f=i(2),h=i(28),d=i(11);function p(t){return t&&t.__esModule?t:{default:t}}var _=11;e.AddTurnsButton=function(t){function e(t,i){(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return o.sprite=new c.Sprite("img/addTurns/addTurns.png",{x:0,y:0},{w:410,h:410},i),o.collider=new h.Collider({x:0,y:0},{w:i.w-10*f.gc.modifer,h:i.h-20*f.gc.modifer},{x:5*f.gc.modifer,y:10*f.gc.modifer}),o.collider.addInteractionObject(d.MainCursor),o.disabled=!1,o._pushed=!1,o._isAnimated=!1,o.moveTo(t),o.setInit(function(){o.render(),o.setRenderIndex(_)}),o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"push",value:function(){var t=this;this._isAnimated||this.disabled||(this._pushed=!0,this.sprite.resize(.95,100),this._isAnimated=!0,setTimeout(function(){return t._isAnimated=!1},100))}},{key:"activate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.sprite.resize(t?1:0,100)}},{key:"unpush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._isAnimated||(this._isAnimated=!0,this.sprite.resize(1,100),e?this.activate(!0):this.activate(!1),setTimeout(function(){t._pushed=!1,t._isAnimated=!1},100))}},{key:"tick",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"tick",this).call(this),d.GameStates.gameOver||!this.collider.getInteractions().has(d.MainCursor.collider)||this.disabled||d.MainCursor.hasMoved?this._pushed&&this.unpush(!d.MainCursor.hold):this._pushed||this.push()}}]),e}(l.GameObject)}]);